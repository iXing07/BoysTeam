<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>注册</title>
	</head>
	<link rel="stylesheet" type="text/css" href="./css/register.css" />
	<body>
		<div class="header">
			<div><a href="login.html"><img src="./icon/back.png"></a></div>
			<div>
				<h1>注册</h1>
			</div>
			<div><a href="login.html"><span>登录</span></a></div>
		</div>
		<div class="register-nav">
			<div> <img src="./icon/logo.png">
				<p>天眼购吧</p>
			</div>
			<div class="form">
				<form aaction="" method="get" name="form">
					<div class="form-message" style="font-size: 0.24rem; color: red;"></div>
					<div class="ipt">
						<label for="phone">账号:</label>
						<input type="phone" name="phone" id="phone" value="" placeholder="请输入手机号" />
						<span id="s_telphone" class="error"></span>
					</div>
					<div class="phipt">
						<input type="text" name="code" id="code" value="" placeholder="请输入验证码" maxlength="4" />
						<button type="button">获取验证码</button>
					</div>
					<div class="ipt">
						<label for="password">密码:</label>
						<input type="password" name="pwd" id="pwd" value="" placeholder="请输入密码" />

					</div>

					<div class="ckeckpassword">
						<label for="pwd2">确认密码:</label>
						<input type="password" name="pwd2" id="pwd2" value="" placeholder="请再次输入密码" />
					</div>
					<div>
						<button type="button" id="sub" name="sub" value="" class="registerbtn"  >注册</button>
					</div>

				</form>
			</div>

		</div>

	</body>
	<script src="./js/px-rem.js"></script>
	<script src="./js/register.js"></script>
	<script src="js/jquery/jquery.js"></script>
	<script>
		function regisuser() {
			var idTimer = 0;
			//回车键
			document.onkeydown = function(e) {
				if (!e) e = window.event; //火狐中是 window.event
				if ((e.keyCode || e.which) == 13) {
					var btlogin = document.getElementById("sub");
					btlogin.focus();
					btlogin.click();
				}
			};
			$('#sub').click(function() {
					var userName = $('#phone').val();
					var code = $('#code').val();
					var password = $('#pwd').val();
					var password2 = $('#pwd2').val();
					var patrn=/^[1][3,4,5,7,8][0-9]{9}$/; 
					console.log(userName)
					console.log(code)
					console.log(password)
					console.log(password2)
					
					if (userName == '' || password == ''||  password2 == '' ) {
						formMessage('手机号或验证码或密码不能为空', 'warning')
					} else {
						formMessage('正在注册...', 'succeed');
						window.setTimeout(function() {
								if (!patrn.test(userName)) {
									formMessage('手机号码不正确.', 'error');
								} else if (code !='1234') {
									formMessage('验证码输入错误.', 'error');
								} else if (password != '123456') {
									formMessage('密码输入错误.', 'error');
								} else if (password2 != '123456') {
									formMessage('密码输入不同.', 'error');
									}
									else {
										formMessage('注册成功，正在跳转.', 'succeed');
										idTimer = 1;
										Load(idTimer);

									}
								}, 500);
						}
					});
				//注册加载
				function Load(flag) {
					if (idTimer == 1) {
						window.location.href = "login.html";

					}
					return false;
				}
				//提示信息
				function formMessage(msg, type) {
					$('.form-message').html('');
					$('.form-message').append('<div class="form-' + type + '-text" >' + msg + '</div>');
				}
			}
			regisuser()
	</script>
</html>
